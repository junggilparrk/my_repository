package day0409Ex;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.net.ServerSocket;
import java.net.Socket;


public class MyTcpServer {
	public static void main(String[] args) {
		
		try {
			ServerSocket serverSocket=new ServerSocket(7777);//서버의 포트번호
			
			System.out.println("접속 대기중...");
			Socket socket=serverSocket.accept();//엑셉트 진행후 클라이언트와 연결된 소켓을 반환
			
			System.out.println(">>>클라이언트 -"+socket.getInetAddress());
			System.out.println("접속 성공....");
			BufferedReader br=new BufferedReader(new InputStreamReader(socket.getInputStream(),"utf-8"));
			BufferedWriter bw=new BufferedWriter(new OutputStreamWriter(socket.getOutputStream(),"utf-8"));
			
			
			SeverRead t1=new SeverRead(br); 
			t1.start();//t1 join을 쓰면 쓰레드가 종료될때까지 기다린다.
			
			SeverWriter t2=new SeverWriter(bw);
			t2.start();
			
		} catch (IOException e) {
			//e.printStackTrace();
			System.out.println("종료되었습니다.");
		} 
		
	}
}
